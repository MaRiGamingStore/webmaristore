<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MaRi GAMING STORE | Akun Jadi Elit, Lu Tinggal Ngupi</title>
    
    <link rel="icon" href="logo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        
        html { scroll-behavior: smooth; }
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #0b0e14; 
            color: #e2e8f0; 
            overflow-x: hidden; 
            font-size: 13px;
            min-height: 100vh; 
            display: flex; 
            flex-direction: column;
        }

        /* SIDEBAR SULTAN LOCKED 220px */
        .sidebar { 
            background: #161b22; border-right: 1px solid #30363d; height: 100vh; position: fixed; 
            left: 0; top: 0; width: 220px; z-index: 50; display: flex; flex-direction: column; padding: 20px;
        }

        .main-content { margin-left: 220px; padding: 0; flex: 1; display: flex; flex-direction: column; }

        @media (max-width: 768px) { .sidebar { display: none; } .main-content { margin-left: 0; width: 100%; } }

        .glass-card { 
            background: #161b22; border: none !important; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            cursor: pointer; border-radius: 1rem; overflow: hidden;
        }
        .glass-card:hover { box-shadow: 0 0 30px rgba(59, 130, 246, 0.2); transform: translateY(-5px); }
        .selected-item { background: rgba(59, 130, 246, 0.1) !important; border: 2px solid #3b82f6 !important; box-shadow: 0 0 25px rgba(59, 130, 246, 0.3); }

        .gaming-gradient { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); }

        /* HEADER CENTRAL SOLID */
        .elite-header { background-color: #161b22 !important; padding: 4rem 1rem; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.5); margin-bottom: 2rem; }
        .header-brand-container img { width: 100px; height: 100px; margin: 0 auto 1.5rem; filter: drop-shadow(0 0 15px rgba(59, 130, 246, 0.4)); }
        .header-brand-container h1 { font-size: 2.5rem; font-weight: 900; color: #3b82f6; font-style: italic; text-transform: uppercase; }
        .header-brand-container p { font-size: 12px; color: #94a3b8; letter-spacing: 5px; font-weight: 800; }

        .banner-main { width: 100%; max-height: 220px; border-radius: 1.5rem; object-fit: contain; margin-bottom: 3.5rem; padding: 0; background: #0d1117; }

        .form-section { background: #161b22; border: 1px solid #30363d; border-radius: 1.2rem; padding: 1.5rem; margin-bottom: 1.5rem; }
        input, select { background: #0d1117 !important; border: 1px solid #30363d !important; color: white !important; font-weight: 600; padding: 14px 16px !important; border-radius: 10px !important; width: 100%; outline: none; font-size: 12px; }

        .l-opt, .pay-opt { background: #0d1117; border: 1px solid #30363d; padding: 1.2rem; text-align: center; border-radius: 1rem; font-weight: 800; font-size: 11px; cursor: pointer; transition: 0.3s; }
        .l-opt.selected-item, .pay-opt.selected-item { border-color: #3b82f6 !important; background: rgba(59, 130, 246, 0.1) !important; }

        .wa-note { color: #ff4444; font-weight: 900; font-style: italic; font-size: 10px; text-transform: uppercase; margin-top: 10px; display: block; line-height: 1.6; }

        .float-wa { position: fixed; bottom: 30px; right: 30px; z-index: 1000; text-align: center; }
        .wa-btn { width: 65px; height: 65px; background-color: #25d366; color: #FFF; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 35px; box-shadow: 0 10px 30px rgba(37, 211, 102, 0.4); animation: pulse 2.5s infinite; }

        #invoiceBox { background: #fff; color: #000; padding: 30px; border-radius: 20px; font-family: 'Courier New', monospace; border: 2px dashed #000; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .inv-row { display: flex; justify-content: space-between; border-bottom: 1px dotted #888; padding: 6px 0; font-size: 11px; text-transform: uppercase; font-weight: 800; }
        
        #eliteNotif { position: fixed; inset: 0; background: rgba(11,14,20,0.96); z-index: 10000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .notif-box { background: #161b22; border: 2px solid #3b82f6; padding: 3.5rem; border-radius: 3rem; max-width: 400px; width: 90%; text-align: center; box-shadow: 0 0 60px rgba(59, 130, 246, 0.4); }

        .pkg-desc-box { max-height: 0; overflow: hidden; transition: 0.4s ease; opacity: 0; font-size: 11px; color: #94a3b8; }
        .selected-item .pkg-desc-box { max-height: 500px; margin-top: 1.5rem; padding-top: 1.2rem; border-top: 1px solid rgba(59, 130, 246, 0.3); opacity: 1; color: #e2e8f0; }

        .ef-note { background: rgba(59, 130, 246, 0.1); border: 1px dashed #3b82f6; padding: 12px; border-radius: 10px; color: #3b82f6; font-size: 10px; font-weight: 800; text-transform: uppercase; margin-bottom: 15px; line-height: 1.5; }
    </style>
</head>
<body>

    <div id="eliteNotif">
        <div class="notif-box">
            <i class="fa-solid fa-bolt-lightning text-blue-500 text-5xl mb-6"></i>
            <h3 class="font-black italic text-2xl text-white uppercase mb-4 tracking-widest">Markas MaRi</h3>
            <p id="notifMsg" class="text-gray-400 font-bold uppercase text-[11px] leading-relaxed mb-10"></p>
            <button onclick="closeNotif()" class="w-full gaming-gradient py-5 rounded-2xl font-black italic uppercase tracking-widest shadow-2xl">OKE CHIEF!</button>
        </div>
    </div>

    <div class="float-wa">
        <a href="https://wa.me/62895320302320" class="wa-btn" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
        <div class="bg-[#161b22] text-[#25d366] px-4 py-1.5 rounded-xl border border-[#25d366] text-[10px] font-black uppercase text-center shadow-2xl">CS KONSULTASI</div>
    </div>

    <aside class="sidebar">
        <div class="mb-6 flex items-center justify-center gap-3 p-3 bg-blue-500/5 rounded-2xl border border-blue-500/10">
            <img src="logo.png" class="w-7 h-7 object-contain opacity-80">
            <p class="font-black italic text-gray-400 uppercase tracking-widest text-[10px]">MaRi STORE</p>
        </div>

        <div class="mb-6 p-4 bg-gray-800 rounded-2xl border border-gray-700 text-left">
            <p id="langTitle" class="text-[9px] font-black text-gray-500 uppercase mb-3 tracking-widest">PILIH BAHASA:</p>
            <div class="space-y-2.5">
                <button onclick="changeLang('id')" id="btnID" class="w-full text-left p-2.5 text-[10px] font-bold border-2 border-blue-500 rounded-xl bg-blue-500/10 flex items-center gap-4 transition">
                    <img src="https://flagcdn.com/w20/id.png" class="w-5"> INDONESIA
                </button>
                <button onclick="changeLang('en')" id="btnEn" class="w-full text-left p-2.5 text-[10px] font-bold border-2 border-gray-700 rounded-xl flex items-center gap-4 transition hover:border-gray-500">
                    <img src="https://flagcdn.com/w20/us.png" class="w-5"> ENGLISH
                </button>
            </div>
        </div>

        <div id="authPanel" class="mb-6 space-y-3 text-center px-2">
            <div id="userProfile" class="hidden p-4 bg-blue-500/10 rounded-xl border border-blue-500/20 text-center">
                <p id="profileName" class="text-[11px] font-bold text-white truncate"></p>
                <button onclick="handleLogout()" class="text-[10px] text-red-500 font-black uppercase mt-3">Logout</button>
            </div>
            <div id="authGuest" class="grid grid-cols-2 gap-2">
                <button onclick="openAuthModal()" class="p-2.5 bg-gray-800 border border-gray-700 rounded-xl text-[10px] font-black uppercase transition hover:border-blue-500">Login</button>
                <button onclick="openAuthModal()" class="p-2.5 gaming-gradient rounded-xl text-[10px] font-black uppercase shadow-lg">Daftar</button>
            </div>
            <button onclick="loginGoogle()" class="w-full p-2.5 bg-white text-black rounded-xl text-[10px] font-black flex items-center justify-center gap-2 shadow-lg mt-3">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-3.5"> Google Login
            </button>
        </div>

        <button onclick="openStatusModal()" class="w-full mb-6 p-4 border-2 border-blue-500 rounded-2xl text-blue-500 font-black italic uppercase text-[10px] hover:bg-blue-500/10 transition">CEK STATUS JOKI</button>

        <nav class="mt-auto border-t border-gray-800 pt-6 text-center">
            <a href="#" onclick="location.reload()" class="font-black uppercase italic tracking-widest text-[11px] hover:text-blue-500 transition"><i class="fa-solid fa-house"></i> BERANDA</a>
        </nav>
    </aside>

    <main class="main-content">
        <header class="elite-header">
            <div class="header-brand-container">
                <img src="logo.png">
                <h1>MaRi GAMING STORE</h1>
                <p>Akun Jadi Elit, Lu Tinggal Ngupi</p>
            </div>
        </header>

        <div class="max-w-[1100px] mx-auto w-full px-8">
            <img src="banner.png" class="banner-main" id="mainBanner">

            <div id="step1" class="page-step active">
                <div class="flex items-center gap-5 mb-12">
                    <div class="w-3 h-12 bg-blue-500 rounded-full"></div>
                    <h2 id="step1Head" class="text-xl font-black italic text-blue-500 tracking-[0.05em] uppercase">GAS PILIH GAME KESAYANGAN LU, CHIEF</h2>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8" id="gameList"></div>
            </div>

            <div id="step2" class="page-step hidden">
                <div id="scrollAnchor"></div>
                <img id="gameBannerTop" src="" class="banner-main"> 
                <h2 id="step2Head" class="text-lg font-black italic text-blue-500 mb-10 uppercase text-center">LAYANAN JOKI SULTAN TERSEDIA</h2>
                <div id="catFilter" class="flex flex-wrap gap-4 mb-12 justify-center"></div>
                <div id="pkgGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16"></div>
                
                <button onclick="backToStep1()" class="bg-gray-800 text-blue-500 font-bold text-[13px] px-12 py-6 rounded-2xl uppercase italic border border-gray-700 mb-20 hover:bg-gray-700 transition shadow-2xl"><i class="fa-solid fa-arrow-left mr-2"></i> Kembali</button>

                <div id="formData" class="hidden">
                    <div class="mt-16 mb-16 border-b border-blue-500 opacity-20"></div>
                    <h2 id="step3Head" class="text-xl font-black italic text-blue-500 mb-12 uppercase text-center">DETAIL ORDER BUYER SULTAN</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-start">
                        <div class="lg:col-span-7 space-y-8">
                            <div class="form-section">
                                <p class="text-[12px] font-black text-blue-500 uppercase mb-5 tracking-widest text-center">Akses Akun & Kontak:</p>
                                <div class="grid grid-cols-2 gap-5 mb-5"><input type="text" id="uId" placeholder="User ID / Email Login"><input type="password" id="uPass" placeholder="Password Akun"></div>
                                <div class="mb-5"><input type="text" id="uWa" placeholder="WhatsApp Aktif Buyer"><span class="wa-note text-center">INFO SULTAN: WA WAJIB AKTIF DAN BENAR UNTUK KIRIM BUKTI SS HASIL AKHIR KE CHIEF!</span></div>
                                <p class="text-[10px] font-bold text-gray-500 uppercase mb-3 tracking-widest text-center">Login Via:</p>
                                <div id="logOpt" class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4"></div>
                            </div>

                            <div id="efSpec" class="hidden form-section">
                                <p class="text-[12px] font-black text-blue-500 uppercase mb-5 tracking-widest text-center">Detail Joki Sultan:</p>
                                <div id="dynamicFields" class="space-y-5"></div>
                                <div id="calcSection" class="hidden space-y-6 mt-6">
                                    <div class="grid grid-cols-2 gap-8">
                                        <div class="space-y-3 text-center">
                                            <p class="text-[11px] font-bold text-gray-500 uppercase">Sekarang:</p>
                                            <select id="startRank" onchange="updTot()"></select>
                                            <input type="number" id="startStar" placeholder="Input Bintang/Poin" value="0" min="0" oninput="updTot()">
                                        </div>
                                        <div class="space-y-3 text-center">
                                            <p class="text-[11px] font-bold text-gray-500 uppercase">Target:</p>
                                            <select id="endRank" onchange="updTot()"></select>
                                            <input type="number" id="endStar" placeholder="Input Bintang/Poin" value="0" min="0" oninput="updTot()">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="lg:col-span-5 space-y-8">
                            <div class="form-section">
                                <p class="text-[12px] font-black text-blue-500 uppercase mb-5 tracking-widest text-center">Metode Pembayaran:</p>
                                <div id="payOpt" class="grid grid-cols-2 gap-3 mb-6"></div>
                                <div id="qtyBox" class="flex items-center gap-5 bg-blue-500/5 p-5 rounded-xl border border-blue-500/20">
                                    <span class="text-[12px] font-black text-gray-400 uppercase">Jumlah:</span>
                                    <input type="number" id="uQty" value="1" min="1" oninput="updTot()" class="!w-24 text-center">
                                </div>
                            </div>
                            <div class="form-section border-blue-500/40">
                                <div class="flex justify-between items-end mb-8">
                                    <p class="text-[12px] font-black text-gray-500 uppercase italic">Tagihan:</p>
                                    <p id="totalPrice" class="text-5xl font-black italic text-blue-500 leading-none">Rp 0</p>
                                </div>
                                <button onclick="openCheckoutModal()" id="btnCheckout" class="w-full gaming-gradient py-7 rounded-2xl font-black italic shadow-2xl uppercase tracking-widest text-2xl transform active:scale-95 transition">GAS JOKI SEKARANG</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="mt-40 border-t-4 border-blue-500 pt-24 pb-24 text-left px-8 bg-[#0d1117]">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-24 mb-20">
                    <div class="text-left">
                        <div class="flex items-center gap-6 mb-12"><img src="logo.png" class="w-24 h-24 object-contain"><h3 class="text-blue-500 font-black italic uppercase text-4xl tracking-tighter">MaRi GAMING STORE</h3></div>
                        <p id="footerDesc" class="text-[16px] text-gray-300 font-black leading-relaxed uppercase mb-12 text-justify"></p>
                    </div>
                    <div class="md:text-right">
                        <h4 class="text-white font-black italic text-sm mb-14 border-b-2 border-blue-500 pb-4 inline-block uppercase tracking-widest">Markas Links</h4>
                        <ul class="space-y-10 text-[22px] font-black italic text-gray-400 uppercase tracking-tighter">
                            <li><a href="#" onclick="location.reload()" class="hover:text-blue-500 transition">üè† BERANDA UTAMA</a></li>
                            <li><a href="https://wa.me/62895320302320" target="_blank" class="hover:text-blue-500 transition">üõ°Ô∏è HUBUNGI ADMIN</a></li>
                        </ul>
                    </div>
                </div>
                <div class="pt-20 border-t border-gray-800 text-center">
                    <p class="text-[14px] text-gray-600 font-black uppercase italic tracking-[0.5em] mb-4">"MaRi Gaming Store, MaRi Kita Joki, Akun Jadi Elit, Lu Tinggal Ngupi, MaRI Beresin Tanpa Keki"</p>
                    <p class="text-[11px] text-gray-700 font-black uppercase italic tracking-[0.5em]">&copy; 2026 MaRi GAMING STORE</p>
                </div>
            </footer>
        </div>
    </main>

    <div id="modalPay" class="fixed inset-0 bg-[#0d1117]/98 hidden flex items-center justify-center p-6 z-[200] backdrop-blur-3xl text-center">
        <div class="bg-[#161b22] p-12 rounded-[4rem] w-full max-w-md border-2 border-gray-800 relative shadow-2xl">
            <button onclick="closeModal()" class="absolute top-10 right-12 text-gray-500 text-4xl"><i class="fa-solid fa-xmark"></i></button>
            <div id="payStep">
                <h3 class="font-black italic text-3xl mb-8 text-blue-500 uppercase tracking-tighter">TRANSFER DANA</h3>
                <div id="qrisContainer" class="hidden mb-8 text-center"><div class="qris-wrapper"><img src="qris.png" alt="QRIS" class="qris-img mx-auto"></div><p class="text-[11px] font-bold text-gray-400 mt-6 uppercase tracking-widest">Scan QR Diatas Untuk Bayar</p></div>
                <div id="bankDetail" class="bg-blue-500/5 p-8 rounded-[2.5rem] mb-8 font-black italic text-[16px] text-blue-400 border-2 border-blue-500/10 text-left leading-relaxed"></div>
                <div class="mb-8 text-left"><p class="text-[11px] font-black text-gray-400 uppercase mb-4 tracking-widest">Upload Bukti Transaksi (Wajib):</p><input type="file" id="uProof" class="!bg-gray-800/50 !p-5 cursor-pointer" accept="image/*"></div>
                <button onclick="processApiGatewayOrder()" id="btnSubmitOrder" class="w-full gaming-gradient py-7 rounded-2xl font-black italic uppercase shadow-xl text-xl flex items-center justify-center gap-4"><span id="btnText">SAYA SUDAH TRANSFER</span><i id="btnLoading" class="fa-solid fa-circle-notch fa-spin hidden"></i></button>
            </div>
            <div id="invoiceStep" class="hidden text-left">
                <div id="invoiceBox">
                    <p class="text-center font-black text-2xl mb-1 italic uppercase">MaRi GAMING STORE</p>
                    <p class="text-center border-b border-black pb-3 mb-6 text-[10px]">OFFICIAL RECEIPT #<span id="invIdDisp"></span></p>
                    <div id="invRows" class="space-y-2"></div>
                    <div class="inv-row" style="font-size:16px; border-top: 3px solid black; margin-top:8px; padding-top:8px; color:#2563eb;"><span>TOTAL</span> <span id="invTot"></span></div>
                </div>
                <p class="mt-8 p-6 bg-blue-500/10 border border-blue-500/30 rounded-2xl text-center text-[11px] text-blue-400 font-black italic uppercase">DATA ORDER TERKIRIM KE MARKAS CHIEF!</p>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/